[tools]
"aqua:FiloSottile/age" = "1.2.1"
"aqua:getsops/sops" = "3.11.0"
"aqua:go-task/task" = "3.45.4"
"aqua:kubernetes/kubectl" = "1.34.0"
direnv = "latest"
node = "22"

[settings]
experimental = true

[env]
# Use the project name derived from the current directory
PROJECT_NAME = "{{ config_root | basename }}"
LC_ALL = "en_US.UTF-8"
LC_CTYPE = "en_US.UTF-8"
# Get the current external IP address without relying on curl or wget
CURRENT_EXTERNAL_IP = "{{ exec(command='exec 3<>/dev/tcp/icanhazip.com/80; printf \"GET / HTTP/1.1\r\nHost: icanhazip.com\r\nConnection: close\r\n\r\n\" >&3; while read -r line <&3; do [[ $line =~ ^[0-9]+\\.[0-9]+\\.[0-9]+\\.[0-9]+$ ]] && echo \"$line\" && break; done; exec 3<&-; exec 3>&-') }}"
